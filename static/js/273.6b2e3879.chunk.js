"use strict";(self.webpackChunkgoit_react_hw_08_phonebook_git=self.webpackChunkgoit_react_hw_08_phonebook_git||[]).push([[273],{8273:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var i=t(2791),r=t(9439),a=t(4554),s=t(9836),o=t(3382),l=t(3994),c=t(9281),d=t(6890),u=t(7002),h=t(5855),m=t(720),g=t(4663),x=t(890),f=t(5527),Z=t(3400),p=t(5523),b=t(1440),j=t(7247),v=t(9e3),C=t(5573),w=t(4942),S=t(1413),k=t(6151),P=t(9218),y=t(5289),L=t(7123),_=t(9157),q=t(1691),A=t(5661),F=t(1070),I=t(1134),U=t(2765),R=t(5985),B=t(9843),D=t(184);var T=function(e){var n,t,a=e.title,s=e.submitButtonName,o=e.icon,l=e.user,c=void 0===l?{name:"",number:""}:l,d=e.allUsers,u=void 0===d?[]:d,h=e.submitForm,m=e.isLoading,g=(0,i.useState)(!1),x=(0,r.Z)(g,2),f=x[0],p=x[1],b=(0,i.useState)(c),j=(0,r.Z)(b,2),v=j[0],C=j[1],T=(0,i.useState)(u),E=(0,r.Z)(T,2),M=E[0],N=E[1],W=(0,I.cI)(),Y=W.register,z=W.handleSubmit,G=W.formState.errors,O=W.reset,Q=function(){p(!1),O()},V=function(e){if(H(e.name))R.Am.error(U.sY.userIsExist);else{var n=c.id?{id:c.id,credentials:e}:e;h(n),O(),p(!1)}},$=function(e){C((0,S.Z)((0,S.Z)({},v),{},(0,w.Z)({},e.target.name,e.target.value)))},H=function(e){return M.find((function(n){return n.name===e}))};return(0,D.jsxs)("div",{children:[m?(0,D.jsx)(B.A,{}):(0,D.jsx)(Z.Z,{onClick:function(e){p(!0),C(c),N(u)},children:o}),(0,D.jsx)(y.Z,{open:f,fullWidth:!0,onClose:Q,children:(0,D.jsxs)(F.Z,{autoComplete:"on",noValidate:!0,onSubmit:z(V),children:[(0,D.jsx)(A.Z,{children:a}),(0,D.jsxs)(_.Z,{children:[(0,D.jsx)(q.Z,{children:"Attention! All fields are required!"}),(0,D.jsx)(P.Z,(0,S.Z)((0,S.Z)({required:!0,autoFocus:!0,margin:"dense",id:"name",label:"User name",type:"text",fullWidth:!0,variant:"standard"},Y("name",{required:{value:!0,message:U.sY.isRequired}})),{},{error:!!G.name,helperText:null===(n=G.name)||void 0===n?void 0:n.message,onChange:$,value:null===v||void 0===v?void 0:v.name})),(0,D.jsx)(P.Z,(0,S.Z)((0,S.Z)({required:!0,margin:"dense",id:"number",label:"Phone number",type:"tel",fullWidth:!0,variant:"standard"},Y("number",{required:{value:!0,message:U.sY.isRequired},pattern:{value:/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/,message:U.sY.wrongInput}})),{},{error:!!G.number,helperText:null===(t=G.number)||void 0===t?void 0:t.message,onChange:$,value:null===v||void 0===v?void 0:v.number}))]}),(0,D.jsxs)(L.Z,{children:[(0,D.jsx)(k.Z,{onClick:Q,children:"Cancel"}),(0,D.jsx)(k.Z,{type:"submit",onClick:z(V),children:s})]})]})})]})},E=t(4524),M=t(8687),N=t(1634),W=t(736),Y=t(5403),z=t(7630),G=t(2065),O=t(1572),Q=(0,z.ZP)("div")((function(e){var n=e.theme;return(0,w.Z)({position:"relative",borderRadius:n.shape.borderRadius,backgroundColor:(0,G.Fq)(n.palette.common.white,.15),"&:hover":{backgroundColor:(0,G.Fq)(n.palette.common.white,.25)},marginLeft:0,width:"100%"},n.breakpoints.up("sm"),{marginLeft:n.spacing(1),width:"auto"})})),V=(0,z.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),$=(0,z.ZP)(O.ZP)((function(e){var n=e.theme;return{color:"inherit","& .MuiInputBase-input":(0,w.Z)({padding:n.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(n.spacing(4),")"),transition:n.transitions.create("width"),width:"100%"},n.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),H=function(){var e=(0,M.useDispatch)(),n=(0,M.useSelector)(W.sellectFilter);return(0,D.jsxs)(Q,{children:[(0,D.jsx)(V,{children:(0,D.jsx)(Y.Z,{})}),(0,D.jsx)($,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"},value:n,onChange:function(n){e((0,N.E1)(n.currentTarget.value))}})]})},J=t(7674),K=t(8687).useSelector,X=t(7674).useGetContactQuery,ee=t(736).sellectFilter;function ne(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0}function te(e,n){return"desc"===e?function(e,t){return ne(e,t,n)}:function(e,t){return-ne(e,t,n)}}function ie(e,n){var t=e.map((function(e,n){return[e,n]}));return t.sort((function(e,t){var i=n(e[0],t[0]);return 0!==i?i:e[1]-t[1]})),t.map((function(e){return e[0]}))}var re=[{id:"id",numeric:!0,disablePadding:!1,label:"N"},{id:"name",numeric:!1,disablePadding:!1,label:"User name"},{id:"number",numeric:!0,disablePadding:!1,label:"Phone number"},{id:"editContact",numeric:!0,disablePadding:!1,label:"Edit contact"},{id:"deleteContact",numeric:!0,disablePadding:!1,label:"Delete contact"}];function ae(e){var n=e.order,t=e.orderBy,i=e.onRequestSort;return(0,D.jsx)(d.Z,{children:(0,D.jsx)(h.Z,{children:re.map((function(e){return(0,D.jsx)(l.Z,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:t===e.id&&n,children:(0,D.jsxs)(m.Z,{active:t===e.id,direction:t===e.id?n:"asc",onClick:(r=e.id,function(e){i(e,r)}),children:[e.label,t===e.id?(0,D.jsx)(a.Z,{component:"span",sx:C.Z,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))})})}function se(e){var n=e.contactsCount,t=e.allUsersArray,i=(0,J.useAddContactMutation)(),a=(0,r.Z)(i,2),s=a[0],o=a[1].isLoading;return(0,D.jsxs)(g.Z,{children:[(0,D.jsxs)(x.Z,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:["Contacts [",n,"]"]}),0!==n&&(0,D.jsx)(H,{}),(0,D.jsx)(T,{title:"Add new contact",submitButtonName:"Add contact",icon:(0,D.jsx)(E.Z,{fontSize:"large"}),allUsers:t,submitForm:s,isLoading:o})]})}function oe(){var e=i.useState("asc"),n=(0,r.Z)(e,2),t=n[0],d=n[1],m=i.useState("name"),g=(0,r.Z)(m,2),x=g[0],C=g[1],w=i.useState(0),S=(0,r.Z)(w,2),k=S[0],P=S[1],y=i.useState(!1),L=(0,r.Z)(y,2),_=L[0],q=L[1],A=i.useState(5),F=(0,r.Z)(A,2),I=F[0],U=F[1],R=(0,J.useDeleteContactMutation)(),B=(0,r.Z)(R,2),E=B[0],M=B[1].isLoading,N=function(){var e=X(),n=e.data,t=void 0===n?[]:n,i=e.error,r=e.isLoading,a=K(ee).toLowerCase();return{filteredContacts:t.filter((function(e){return e.name.toLowerCase().includes(a)})),contacts:t,options:{error:i,isLoading:r}}}(),W=N.filteredContacts,Y=N.contacts,z=(0,J.useUpdateContactMutation)(),G=(0,r.Z)(z,2),O=G[0],Q=G[1].isLoading,V=k>0?Math.max(0,(1+k)*I-W.length):0;return(0,D.jsxs)(a.Z,{sx:{width:"100%"},children:[(0,D.jsxs)(f.Z,{sx:{width:"100%",mb:2},children:[(0,D.jsx)(se,{contactsCount:Y.length,allUsersArray:Y}),(0,D.jsx)(c.Z,{children:(0,D.jsxs)(s.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:_?"small":"medium",children:[(0,D.jsx)(ae,{order:t,orderBy:x,onRequestSort:function(e,n){d(x===n&&"asc"===t?"desc":"asc"),C(n)},rowCount:Y.length}),0!==W.length&&(0,D.jsxs)(o.Z,{children:[ie(W,te(t,x)).slice(k*I,k*I+I).map((function(e,n,t){var i="enhanced-table-checkbox-".concat(n),r=n+1;return(0,D.jsxs)(h.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,D.jsx)(l.Z,{component:"th",id:i,scope:"row",padding:"normal",align:"right",width:40,children:r}),(0,D.jsx)(l.Z,{align:"left",children:e.name}),(0,D.jsx)(l.Z,{align:"right",children:e.number}),(0,D.jsx)(l.Z,{align:"right",children:(0,D.jsx)(T,{icon:(0,D.jsx)(v.Z,{}),user:e,allUsers:t,title:"Edit contact",submitButtonName:"Save changes",submitForm:O,isLoading:Q})}),(0,D.jsx)(l.Z,{align:"right",children:(0,D.jsx)(Z.Z,{onClick:function(){return n=e.id,void(M||E(n));var n},children:(0,D.jsx)(j.Z,{})})})]},e.id)})),V>0&&(0,D.jsx)(h.Z,{style:{height:(_?33:53)*V},children:(0,D.jsx)(l.Z,{colSpan:6})})]})]})}),0===W.length?(0,D.jsx)(a.Z,{sx:{width:"100%",p:2,display:"flex",alignItems:"center",justifyContent:"center"},children:"The phonebook is empty"}):(0,D.jsx)(u.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:W.length,rowsPerPage:I,page:k,onPageChange:function(e,n){P(n)},onRowsPerPageChange:function(e){U(parseInt(e.target.value,10)),P(0)}})]}),0!==W.length&&(0,D.jsx)(p.Z,{control:(0,D.jsx)(b.Z,{checked:_,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}var le=t(1214),ce=function(){return(0,D.jsx)(le.Z,{children:(0,D.jsx)(oe,{})})}},1070:function(e,n,t){t.d(n,{Z:function(){return a}});var i=t(9457),r=(t(2791),t(184)),a=function(e){var n=e.children,t=e.autoComplete,a=e.onSubmit;return(0,r.jsx)("form",{onSubmit:a,autoComplete:t,children:(0,r.jsx)(i.x,{display:"flex",flexDirection:"column",gridGap:4,children:n})})}},736:function(e,n,t){t.r(n),t.d(n,{sellectFilter:function(){return i}});var i=function(e){return e.filter}}}]);
//# sourceMappingURL=273.6b2e3879.chunk.js.map